<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARVEL // INFINITY SAGA 2.0</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Inter:wght@300;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --m-red: #e62429;
            --m-gold: #ffc82c;
            --bg: #020202;
            --accent: #e62429;
        }

        body {
            margin: 0;
            background: var(--bg);
            color: white;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            cursor: none; /* Hides default cursor */
        }

        /* MAGNETIC HUD CURSOR */
        #cursor-wrapper {
            position: fixed;
            top: 0; left: 0;
            pointer-events: none;
            z-index: 9999;
        }

        .cursor-dot {
            position: absolute;
            width: 6px; height: 6px;
            background: white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        .cursor-hud {
            position: absolute;
            width: 40px; height: 40px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, border 0.3s;
        }

        .cursor-spin {
            position: absolute;
            width: 55px; height: 55px;
            border: 1px solid var(--accent);
            border-top-color: transparent;
            border-bottom-color: transparent;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: spin 3s linear infinite;
        }

        @keyframes spin { 100% { transform: translate(-50%, -50%) rotate(360deg); } }

        /* HERO ELEMENTS */
        .logo {
            background: var(--m-red);
            padding: 10px 40px;
            font-family: 'Oswald', sans-serif;
            font-size: 4rem;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.2);
            z-index: 200;
            letter-spacing: 4px;
            display: inline-block;
            box-shadow: 0 0 50px rgba(230, 36, 41, 0.4);
            pointer-events: none;
        }

        .visual-frame {
            position: sticky;
            top: 0;
            height: 100vh;
            overflow: hidden;
            background: radial-gradient(circle at center, #111 0%, #000 100%);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #bg-glow {
            position: absolute;
            width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, var(--accent) 0%, transparent 70%);
            opacity: 0.15;
            transition: background 1s ease;
        }

        .hero-container {
            position: absolute;
            width: 100%; height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
        }

        .hero-img {
            position: absolute;
            height: 90vh;
            bottom: -5%;
            filter: drop-shadow(0 0 30px rgba(0,0,0,0.5));
            opacity: 0;
            pointer-events: none;
            will-change: transform, opacity;
        }

        .content-section {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 10%;
            position: relative;
            z-index: 10;
        }

        h2 {
            font-family: 'Oswald', sans-serif;
            font-size: clamp(5rem, 12vw, 9rem);
            margin: 0;
            text-transform: uppercase;
            line-height: 0.85;
            -webkit-text-stroke: 1px rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
        }

        .quote {
            color: var(--m-gold);
            font-family: 'Oswald';
            text-transform: uppercase;
            font-size: 1.2rem;
            margin: 20px 0;
            opacity: 0;
            letter-spacing: 4px;
        }

        p { max-width: 400px; color: #888; line-height: 1.8; font-size: 0.9rem; }

        #snow-canvas {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 2;
        }
    </style>
</head>
<body>

    <div id="cursor-wrapper">
        <div class="cursor-dot"></div>
        <div class="cursor-hud"></div>
        <div class="cursor-spin"></div>
    </div>

    <div class="logo" id="main-logo">MARVEL</div>

    <div id="scrolly-container">
        <div class="visual-frame">
            <div id="bg-glow"></div>
            <canvas id="snow-canvas"></canvas>
            
            <div class="hero-container" id="hero-layer">
                <img src="https://pngimg.com/uploads/ironman/ironman_PNG15.png" class="hero-img" id="img-ironman">
                <img src="https://pngimg.com/uploads/spider_man/spider_man_PNG10.png" class="hero-img" id="img-spiderman">
                <img src="thor.png" class="hero-img" id="img-thor">
                <img src="drstange.png" class="hero-img" id="img-strange">
                <img src="black panther.png" class="hero-img" id="img-panther">
            </div>
        </div>

        <section class="content-section" data-color="#e62429">
            <h2 class="hover-target">IRON<br>MAN</h2>
            <p class="quote">"I am Iron Man."</p>
            <p>The billionaire who started it all. Pushing the limits of technology to protect the world.</p>
        </section>

        <section class="content-section" data-color="#22d3ee">
            <h2 class="hover-target">SPIDER<br>MAN</h2>
            <p class="quote">"Neighborhood Hero"</p>
            <p>Queens' finest. A friendly neighborhood hero weaving a web of justice across the multiverse.</p>
        </section>

        <section class="content-section" data-color="#3b82f6">
            <h2 class="hover-target">THOR</h2>
            <p class="quote">"God of Thunder"</p>
            <p>The King of Asgard. Wielder of Mjolnir and Stormbreaker, protector of the Nine Realms.</p>
        </section>

        <section class="content-section" data-color="#8b5cf6">
            <h2 class="hover-target">DOCTOR<br>STRANGE</h2>
            <p class="quote">"Master of Arts"</p>
            <p>The Sorcerer Supreme. Protecting our reality from mystical threats across the multiverse.</p>
        </section>

        <section class="content-section" data-color="#71717a">
            <h2 class="hover-target">BLACK<br>PANTHER</h2>
            <p class="quote">"Wakanda Forever!"</p>
            <p>King T'Challa. Harnessing the power of Vibranium and the wisdom of his ancestors.</p>
        </section>
    </div>

<script>
    gsap.registerPlugin(ScrollTrigger);

    // --- 1. MAGNETIC HUD CURSOR SYSTEM ---
    const dot = document.querySelector(".cursor-dot");
    const ring = document.querySelector(".cursor-hud");
    const spin = document.querySelector(".cursor-spin");

    let mouse = { x: 0, y: 0 }; // Target position
    let pos = { x: 0, y: 0 };   // Lagging position
    const speed = 0.15;         // Fluidity factor (lower = more lag)

    window.addEventListener("mousemove", (e) => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
        
        // Dot is instant
        gsap.set(dot, { x: mouse.x, y: mouse.y });
    });

    // Ticker creates the "smooth follow" effect
    gsap.ticker.add(() => {
        const dt = 1.0 - Math.pow(1.0 - speed, gsap.ticker.deltaRatio()); 
        
        pos.x += (mouse.x - pos.x) * dt;
        pos.y += (mouse.y - pos.y) * dt;

        gsap.set([ring, spin], { x: pos.x, y: pos.y });
    });

    // Hover interactions
    const hoverTargets = document.querySelectorAll(".hover-target, p, .logo");
    hoverTargets.forEach(target => {
        target.addEventListener("mouseenter", () => {
            gsap.to(ring, { width: 80, height: 80, borderColor: "white", duration: 0.3 });
            gsap.to(dot, { scale: 0, duration: 0.2 });
        });
        target.addEventListener("mouseleave", () => {
            gsap.to(ring, { width: 40, height: 40, borderColor: "rgba(255,255,255,0.3)", duration: 0.3 });
            gsap.to(dot, { scale: 1, duration: 0.2 });
        });
    });

    // --- 2. LOGO SEQUENCE ---
    gsap.timeline({
        scrollTrigger: {
            trigger: "body",
            start: "top top",
            end: "500px top",
            scrub: 1
        }
    })
    .to("#main-logo", {
        scale: 1.5,
        rotationY: 360,
        top: "10%",
        duration: 1
    })
    .to("#main-logo", {
        scale: 0.4,
        top: "40px",
        left: "120px",
        rotationY: 720,
        duration: 1
    });

    // --- 3. HERO CONTENT ANIMATIONS ---
    const heroes = [
        { id: "#img-ironman", start: { x: -300, y: 100, rotate: -15, scale: 0.8 } },
        { id: "#img-spiderman", start: { y: -800, rotate: 20, scale: 1.3 } },
        { id: "#img-thor", start: { y: -200, scale: 2, filter: "brightness(5) contrast(2)" } },
        { id: "#img-strange", start: { rotateY: 180, scale: 0, opacity: 0 } },
        { id: "#img-panther", start: { x: 500, scale: 1.2, skewX: -10 } }
    ];
    
    gsap.utils.toArray(".content-section").forEach((section, i) => {
        const color = section.getAttribute("data-color");
        const charData = heroes[i];
        const heroEl = document.querySelector(charData.id);
        
        gsap.set(heroEl, charData.start);

        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: section,
                start: "top center",
                end: "bottom center",
                toggleActions: "play reverse play reverse",
                onEnter: () => updateTheme(color),
                onEnterBack: () => updateTheme(color)
            }
        });

        if (charData.id === "#img-ironman") {
            tl.to(heroEl, { x: 0, y: 0, rotate: 0, scale: 1, opacity: 1, duration: 1.2, ease: "power4.out" });
        } 
        else if (charData.id === "#img-spiderman") {
            tl.to(heroEl, { y: 0, rotate: 0, scale: 1, opacity: 1, duration: 1, ease: "back.out(1.4)" });
        } 
        else if (charData.id === "#img-thor") {
            tl.to(heroEl, { y: 0, scale: 1, opacity: 1, filter: "brightness(1) contrast(1)", duration: 0.7, ease: "expo.out" });
        } 
        else if (charData.id === "#img-strange") {
            tl.to(heroEl, { rotateY: 0, scale: 1, opacity: 1, duration: 1.5, ease: "elastic.out(1, 0.75)" });
        } 
        else if (charData.id === "#img-panther") {
            tl.to(heroEl, { x: 0, scale: 1, skewX: 0, opacity: 1, duration: 0.8, ease: "power3.out" });
        }

        tl.to(section.querySelector(".quote"), { opacity: 1, x: 20, duration: 0.6 }, "-=0.4");
    });

    function updateTheme(color) {
        document.documentElement.style.setProperty('--accent', color);
        gsap.to("#bg-glow", { 
            background: `radial-gradient(circle at 50% 50%, ${color} 0%, transparent 70%)`,
            duration: 1 
        });
    }

    // --- 4. SNOW ENGINE ---
    const canvas = document.getElementById("snow-canvas");
    const ctx = canvas.getContext("2d");
    let w, h, flakes = [];

    function initSnow() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        flakes = [];
        for (let i = 0; i < 150; i++) {
            flakes.push({
                x: Math.random() * w,
                y: Math.random() * h,
                r: Math.random() * 2 + 1,
                d: Math.random() * 0.5 + 0.5
            });
        }
    }

    function drawSnow() {
        ctx.clearRect(0, 0, w, h);
        ctx.fillStyle = "rgba(255, 255, 255, 0.4)";
        ctx.beginPath();
        for (let f of flakes) {
            ctx.moveTo(f.x, f.y);
            ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
            f.y += f.d;
            if (f.y > h) f.y = -5;
        }
        ctx.fill();
        requestAnimationFrame(drawSnow);
    }

    window.addEventListener("resize", initSnow);
    initSnow();
    drawSnow();
</script>
</body>
</html>